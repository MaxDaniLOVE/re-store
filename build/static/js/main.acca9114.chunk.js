(this["webpackJsonpre-store"]=this["webpackJsonpre-store"]||[]).push([[0],{29:function(e,t,a){},32:function(e,t,a){e.exports=a(49)},37:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},49:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(20),c=a.n(o),l=a(12),i=a(13),s=a(17),u=a(16),m=a(18),f=a(6),p=(a(37),function(e){var t=e.book,a=e.onAddedToCart,n=e.onShowInfo,o=t.title,c=t.author,l=t.image,i=t.price,s={backgroundImage:"url(".concat(l,")")};return r.a.createElement("div",{className:"jumbotron book-item"},r.a.createElement("div",{className:"book-item-img",style:s,height:"100%",alt:"img"}),r.a.createElement("div",{className:"book-item-info-wrapper"},r.a.createElement("h1",{className:"display-3 book-title"},o),r.a.createElement("p",{className:"lead"},c),r.a.createElement("hr",{className:"my-4"}),r.a.createElement("p",null,"There will be description"),r.a.createElement("p",{className:"book-item-price"},"$".concat(i)),r.a.createElement("p",{className:"lead"},r.a.createElement("button",{className:"btn btn-success",onClick:a},"Add to cart"),r.a.createElement(f.b,{to:"./book-info",className:"btn btn-info",onClick:function(){return n()}},"Show more info"))))}),b=a(7),d=r.a.createContext(),E=d.Provider,h=d.Consumer,k=function(){return function(e){return function(t){return r.a.createElement(h,null,(function(a){return r.a.createElement(e,Object.assign({},t,{bookstoreService:a}))}))}}},O=function(e){return{type:"BOOK_ADDED_TO_CART",payload:e}},g=(a(43),a(44),function(){return r.a.createElement("div",{className:"loadingio-spinner-ripple-tiol49iw8o"},r.a.createElement("div",{className:"ldio-1yzaoj1eeam"},r.a.createElement("div",null),r.a.createElement("div",null)))}),v=function(){return r.a.createElement("div",null,r.a.createElement("h3",null,"Something wrong, please refresh page..."))},_=function(e){var t=e.books,a=e.onAddedToCart,n=e.onShowInfo,o=e.infoId;return r.a.createElement("div",{className:"book-list-wrapper"},t.map((function(e){return r.a.createElement(p,{key:e.id,book:e,onAddedToCart:function(){return a(e.id)},infoId:o,onShowInfo:function(){return n(e.id)}})})))},N=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchBooks()}},{key:"render",value:function(){var e=this.props,t=e.books,a=e.isLoading,n=e.error,o=e.onAddedToCart,c=e.onShowInfo,l=e.infoId;return a?r.a.createElement("div",{className:"book-list-wrapper"},r.a.createElement(g,null)):n?r.a.createElement("div",{className:"book-list-wrapper"},r.a.createElement(v,null)):r.a.createElement(_,{books:t,onAddedToCart:o,onShowInfo:c,infoId:l})}}]),t}(n.Component),y=k()(Object(b.b)((function(e){return{books:e.books,isLoading:e.isLoading,error:e.error,infoId:e.infoId}}),(function(e,t){var a=t.bookstoreService;return{fetchBooks:function(){e({type:"FETCH_BOOKS_REQUEST"}),a.getBooks().then((function(t){e({type:"FETCH_BOOKS_SUCCESS",payload:t})})).catch((function(t){e({type:"FETCH_BOOKS_FAILURE",payload:t})}))},onAddedToCart:function(t){e(O(t))},onShowInfo:function(t){e(function(e){return{type:"WRITE_BOOK_ID",payload:e}}(t))}}}))(N)),I=(a(45),function(){return r.a.createElement("div",{className:"home-page-wrapper"},r.a.createElement(y,null))}),w=(a(46),Object(b.b)((function(e){return{items:e.cartItems,total:e.orderTotal}}),(function(e){return{onIncrease:function(t){return e(O(t))},onDecrease:function(t){return e(function(e){return{type:"BOOK_REMOVED_FROM_CART",payload:e}}(t))},onDelete:function(t){return e(function(e){return{type:"ALL_BOOKS_REMOVED_FROM_CART",payload:e}}(t))}}}))((function(e){var t=e.items,a=e.total,n=e.onIncrease,o=e.onDecrease,c=e.onDelete;return r.a.createElement("div",{className:"shopping-cart"},r.a.createElement("div",{className:"shopping-cart-header"},r.a.createElement("h3",null,"Your cart:"),r.a.createElement(f.b,{className:"btn btn-warning cart-btn return-btn",to:"/"},"Return to shop")),r.a.createElement("table",{className:"table shopping-cart-table"},r.a.createElement("thead",{className:"shopping-cart-table-header"},r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"#"),r.a.createElement("th",{scope:"col"},"Item"),r.a.createElement("th",{scope:"col"},"Count"),r.a.createElement("th",{scope:"col"},"Price"),r.a.createElement("th",{scope:"col"},"Action"))),r.a.createElement("tbody",null,t.map((function(e,t){var a=e.id,l=e.title,i=e.total,s=e.count;return r.a.createElement("tr",{key:a,className:"shopping-cart-table tr"},r.a.createElement("th",null,t+1),r.a.createElement("td",null,l),r.a.createElement("td",null,s),r.a.createElement("td",null,"$".concat(i)),r.a.createElement("td",{className:"td-btns"},r.a.createElement("button",{className:"btn btn-success cart-btn",onClick:function(){return n(a)}},r.a.createElement("i",{className:"fa fa-plus-square"})),r.a.createElement("button",{className:"btn btn-warning cart-btn",onClick:function(){return o(a)}},r.a.createElement("i",{className:"fa fa-minus-square"})),r.a.createElement("button",{className:"btn btn-danger cart-btn",onClick:function(){return c(a)}},r.a.createElement("i",{className:"fa fa-trash"}))))})))),r.a.createElement("h5",{className:"shopping-cart-total"},"Total: $",a))}))),j=function(){return r.a.createElement("div",{className:"home-page-wrapper"},r.a.createElement(w,null))},T=(a(47),a(15)),C=a.n(T),R=function(){function e(){var t=this;Object(l.a)(this,e),this._bookApi="https://api.itbook.store/1.0/",this._proxyUrl="https://cors-anywhere.herokuapp.com/",this._trandformBook=function(e){return{id:e.isbn13,title:e.title,author:e.subtitle,image:e.image,price:parseFloat(e.price.slice(1))}},this.getBooks=function(){var e;return C.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,C.a.awrap(t.getResource("".concat(t._bookApi,"new")));case 2:return e=a.sent,a.abrupt("return",e.books.map(t._trandformBook));case 4:case"end":return a.stop()}}))},this.getBookInfo=function(e){var a;return C.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,C.a.awrap(t.getResource("".concat(t._bookApi,"books/").concat(e)));case 2:return a=n.sent,n.abrupt("return",a);case 4:case"end":return n.stop()}}))}}return Object(i.a)(e,[{key:"getResource",value:function(e){var t,a;return C.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,C.a.awrap(fetch("".concat(this._proxyUrl).concat(e)));case 2:if((t=n.sent).ok){n.next=5;break}throw new Error("something wromg...");case 5:return n.next=7,C.a.awrap(t.json());case 7:return a=n.sent,n.abrupt("return",a);case 9:case"end":return n.stop()}}),null,this)}}]),e}(),S=a(11),B=function(e){var t=new Array(5).fill(!1);parseInt(e);for(var a=0;a<=e-1;)t[a]=!0,a++;var n=t.filter((function(e){return!0===e})),o=t.filter((function(e){return!1===e}));return n=n.map((function(e,t){return r.a.createElement("i",{key:t+1,className:"fa fa-star colored"})})),o=o.map((function(e,t){return r.a.createElement("i",{key:t+5,className:"fa fa-star empty"})})),[].concat(Object(S.a)(n),Object(S.a)(o))},A=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={bookInfo:{},isLoading:!0},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.getBook()}},{key:"getBook",value:function(){var e=this,t=this.props,a=t.infoId,n=t.fetchBookInfo;return a?n((new R).getBookInfo(a).then((function(t){e.setState({bookInfo:t,isLoading:!1})}))):r.a.createElement("div",{className:"home-page-wrapper"},r.a.createElement("h1",{className:"book-info"},"Return to previous page and select book"))}},{key:"render",value:function(){var e=this.props.infoId,t=this.state,a=t.bookInfo,n=t.isLoading,o=a.title,c=a.subtitle,l=a.authors,i=a.publisher,s=a.language,u=a.pages,m=a.year,f=a.rating,p=a.desc,b=a.price,d=a.image,E=B(f);return e?n?r.a.createElement("div",{className:"home-page-wrapper"},r.a.createElement("div",{className:"book-info"},r.a.createElement(g,null))):r.a.createElement("div",{className:"home-page-wrapper"},r.a.createElement("div",{className:"book-info jumbotron book-info-block"},r.a.createElement("div",{className:"book-image-info",style:{backgroundImage:"url(".concat(d,")")},alt:"img"}),r.a.createElement("div",{className:"book-info-block_titles"},r.a.createElement("h1",{className:"book-info-title"},o),r.a.createElement("h2",{className:"book-info-subtitle"},c),r.a.createElement("hr",{size:"30"}),r.a.createElement("h5",null,"Authors: ",l),r.a.createElement("h5",null,"Publisher: ",i),r.a.createElement("h5",null,"Language: ",s),r.a.createElement("h5",null,"Pages: ",u),r.a.createElement("h5",null,"Year: ",m),r.a.createElement("h5",null,"Description: ",p),r.a.createElement("div",{className:"rating"},r.a.createElement("h3",null,"Rating: ",E)),r.a.createElement("h2",null,"Price: ",b)))):r.a.createElement("div",{className:"home-page-wrapper"},r.a.createElement("h1",{className:"book-info"},"Return to previous page and select book"))}}]),t}(n.Component),D=Object(b.b)((function(e){return{infoId:e.infoId,bookInfo:e.bookInfo}}),(function(e){return{fetchBookInfo:function(t){e(function(e){return{type:"WRITE_BOOK_ID",payload:e}}(t))}}}))(A),L=a(14),F=(a(29),Object(b.b)((function(e){return{items:e.cartItems,total:e.orderTotal}}))((function(e){var t,a=e.items,n=e.total;return r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-success"},r.a.createElement(f.b,{className:"navbar-brand",to:"/"},"RE-store"),r.a.createElement(f.b,{to:"/cart",className:"btn cart-link"},r.a.createElement("i",{className:"fa fa-shopping-cart"}),r.a.createElement("span",{className:"cart-num"},"".concat((t=a).length?t.reduce((function(e,t){return e+t.count}),0):0," items ")),r.a.createElement("span",{className:"cart-total"}," ".concat(n,"$"))))}))),x=function(){return r.a.createElement("main",null,r.a.createElement(F,null),r.a.createElement(L.c,null,r.a.createElement(L.a,{path:"/",component:I,exact:!0}),r.a.createElement(L.a,{path:"/cart",component:j}),r.a.createElement(L.a,{path:"/book-info",component:D})))},K=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={hasError:!1},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidCatch",value:function(){this.state({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?r.a.createElement(v,null):this.props.children}}]),t}(n.Component),M=a(22),U=a(9),H=function(e){return e.length?e.reduce((function(e,t){return e+t.total}),0).toFixed(2):0},V=function(e,t,a){var n=e.books,r=e.cartItems,o=n.find((function(e){return e.id===t})),c=r.findIndex((function(e){return e.id===t})),l=function(e,t,a){return 0===t.count?[].concat(Object(S.a)(e.slice(0,a)),Object(S.a)(e.slice(a+1))):-1===a?[].concat(Object(S.a)(e),[t]):[].concat(Object(S.a)(e.slice(0,a)),[t],Object(S.a)(e.slice(a+1)))}(r,function(e,t,a){return t?Object(U.a)({},t,{count:t.count+a,total:parseFloat((t.total+a*e.price).toFixed(2))}):{id:e.id,title:e.title,count:1,total:e.price}}(o,r[c],a),c);return Object(U.a)({},e,{cartItems:l,orderTotal:H(l)})},P={books:[],isLoading:!0,error:null,cartItems:[],orderTotal:0,infoId:null,bookInfo:{}},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_BOOKS_REQUEST":return Object(U.a)({},e,{books:t.payload,isLoading:!0,error:null});case"FETCH_BOOKS_SUCCESS":return Object(U.a)({},e,{books:t.payload,isLoading:!1,error:null});case"FETCH_BOOKS_FAILURE":return Object(U.a)({},e,{books:[],isLoading:!1,error:t.payload});case"BOOK_ADDED_TO_CART":return V(e,t.payload,1);case"BOOK_REMOVED_FROM_CART":return V(e,t.payload,-1);case"ALL_BOOKS_REMOVED_FROM_CART":var a=t.payload,n=e.cartItems.filter((function(e){return e.id!==a}));return Object(U.a)({},e,{cartItems:n,orderTotal:H(n)});case"WRITE_BOOK_ID":return Object(U.a)({},e,{infoId:t.payload});case"FETCH_BOOK_INFO":return Object(U.a)({},e,{bookInfo:t.payload});default:return e}},$=Object(M.b)(X,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),W=new R;c.a.render(r.a.createElement(b.a,{store:$},r.a.createElement(K,null,r.a.createElement(E,{value:W},r.a.createElement(f.a,null,r.a.createElement(x,null))))),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.acca9114.chunk.js.map