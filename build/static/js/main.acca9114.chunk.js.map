{"version":3,"sources":["components/book-list-item/index.js","components/book-list-item/book-list-item.js","components/bookstore-service-context/bookstore-service-context.js","components/hoc/with-bookstore-service.js","actions/index.js","components/spinner/index.js","components/spinner/spinner.js","components/error-indicator/index.js","components/error-indicator/error-indicator.js","components/book-list/book-list.js","components/book-list/index.js","components/pages/home-page.js","components/shopping-cart-table/index.js","components/shopping-cart-table/shopping-cart-table.js","components/pages/cart-page.js","services/bookstore-service.js","utils/ratingStars.js","components/pages/book-info.js","components/shop-header/index.js","components/shop-header/shop-header.js","components/app/index.js","components/app/app.js","components/error-boundry/index.js","components/error-boundry/error-boundry.js","reducers/updateCart.js","reducers/index.js","store.js","index.js"],"names":["BookListItem","book","onAddedToCart","onShowInfo","title","author","image","price","style","backgroundImage","className","height","alt","onClick","to","React","createContext","BookstoreServiceProvider","Provider","BookstoreServiceConsumer","Consumer","withBookstoreService","Wrapped","props","bookstoreService","bookAddedToCart","id","type","payload","Spinner","ErrorIndicator","BookList","books","infoId","map","key","BookListContainer","this","fetchBooks","isLoading","error","Component","connect","state","dispatch","ownProps","getBooks","then","data","catch","err","bookInfoId","HomePage","ShoppingCartTable","items","cartItems","total","orderTotal","onIncrease","onDecrease","bookRemovedFromCart","onDelete","allBookRemovedFromCart","scope","item","idx","count","CartPage","BookstoreService","_bookApi","_proxyUrl","_trandformBook","isbn13","subtitle","parseFloat","slice","a","async","getResource","res","getBookInfo","url","fetch","ok","Error","json","ratingStars","rating","stars","Array","fill","parseInt","i","filledStars","filter","element","emptyStars","value","index","BookInfo","bookInfo","getBook","fetchBookInfo","setState","authors","publisher","language","pages","year","desc","size","info","ShopHeader","length","reduce","reducer","App","path","component","exact","ErrorBoundry","hasError","children","countTotal","toFixed","updateOrder","bookId","quantity","find","itemIndex","findIndex","addedBook","updatedCart","updateCartItems","updateCartItem","initialState","action","deletedBookId","updatedBooks","store","createStore","window","__REDUX_DEVTOOLS_EXTENSION__","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.acca9114.chunk.js","sourcesContent":["import BookListItem from './book-list-item';\r\n\r\nexport default BookListItem;","import React from 'react';\r\nimport {\r\n  Link\r\n} from \"react-router-dom\";\r\nimport './book-list-item.css'\r\n\r\nconst BookListItem = ({ book, onAddedToCart, onShowInfo }) => {\r\n  const {title, author, image, price} = book;\r\n  const style = {\r\n    backgroundImage: `url(${image})`\r\n  }\r\n  return (\r\n    <div className=\"jumbotron book-item\">\r\n      <div className=\"book-item-img\" style={style} height=\"100%\" alt=\"img\"/>\r\n      <div className=\"book-item-info-wrapper\">\r\n        <h1 className=\"display-3 book-title\">{title}</h1>\r\n        <p className=\"lead\">{author}</p>\r\n        <hr className=\"my-4\" />\r\n        <p>There will be description</p>\r\n        <p className=\"book-item-price\">{`$${price}`}</p>\r\n        <p className=\"lead\">\r\n          <button\r\n          className=\"btn btn-success\"\r\n          onClick={onAddedToCart}\r\n          >Add to cart</button>\r\n          <Link\r\n          to=\"./book-info\"\r\n          className=\"btn btn-info\"\r\n          onClick={() => onShowInfo()\r\n          }\r\n          >Show more info</Link>\r\n        </p>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default BookListItem;\r\n","import React from 'react';\r\n\r\nconst { \r\n  Provider: BookstoreServiceProvider,\r\n  Consumer: BookstoreServiceConsumer\r\n} = React.createContext();\r\n\r\nexport {\r\n  BookstoreServiceProvider,\r\n  BookstoreServiceConsumer\r\n}","import React from 'react';\r\nimport {\r\n  BookstoreServiceConsumer\r\n} from '../bookstore-service-context';\r\n\r\nconst withBookstoreService = () => (Wrapped) => {\r\n  return (props) => {\r\n    return (\r\n      <BookstoreServiceConsumer>\r\n        {\r\n          (bookstoreService) => {\r\n            return <Wrapped {...props} bookstoreService={bookstoreService}/>\r\n          }\r\n        }\r\n      </BookstoreServiceConsumer>\r\n    )\r\n  }\r\n}\r\n\r\nexport default withBookstoreService;","const booksLoaded = (newBooks) => {\r\n  return {\r\n    type: 'FETCH_BOOKS_SUCCESS',\r\n    payload: newBooks,\r\n  }\r\n}\r\nconst booksRequested = () => {\r\n  return {\r\n    type: 'FETCH_BOOKS_REQUEST',\r\n  }\r\n}\r\nconst booksError = (error) => {\r\n  return {\r\n    type: 'FETCH_BOOKS_FAILURE',\r\n    payload: error,\r\n  }\r\n}\r\n\r\nconst bookAddedToCart = (id) => {\r\n  return {\r\n    type: 'BOOK_ADDED_TO_CART',\r\n    payload: id,\r\n  }\r\n}\r\n\r\nconst bookRemovedFromCart = (id) => {\r\n  return {\r\n    type: 'BOOK_REMOVED_FROM_CART',\r\n    payload: id,\r\n  }\r\n}\r\n\r\nconst allBookRemovedFromCart = (id) => {\r\n  return {\r\n    type: 'ALL_BOOKS_REMOVED_FROM_CART',\r\n    payload: id,\r\n  }\r\n}\r\n\r\nconst bookInfoId = (id) => {\r\n  return {\r\n    type: 'WRITE_BOOK_ID',\r\n    payload: id,\r\n  }\r\n}\r\n\r\nconst bookInfo = (info) => {\r\n  return {\r\n    type: 'WRITE_BOOK_ID',\r\n    payload: info,\r\n  }\r\n}\r\n\r\nexport {\r\n  booksLoaded,\r\n  booksRequested,\r\n  booksError,\r\n  bookAddedToCart,\r\n  allBookRemovedFromCart,\r\n  bookRemovedFromCart,\r\n  bookInfoId,\r\n  bookInfo\r\n}","import Spinner from './spinner';\r\nexport default Spinner;","import React from 'react';\r\nimport './spinner.css'\r\n\r\nconst Spinner = () => {\r\n  return (\r\n    <div className=\"loadingio-spinner-ripple-tiol49iw8o\">\r\n      <div className=\"ldio-1yzaoj1eeam\">\r\n        <div></div>\r\n        <div></div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Spinner;\r\n","import ErrorIndicator from './error-indicator';\r\nexport default ErrorIndicator;","import React from 'react';\r\n\r\nconst ErrorIndicator = () => {\r\n  return (\r\n    <div>\r\n      <h3>Something wrong, please refresh page...</h3>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ErrorIndicator;\r\n","import React, { Component } from 'react';\r\nimport BookListItem from '../book-list-item';\r\nimport { connect } from 'react-redux';\r\nimport withBookstoreService from '../hoc/with-bookstore-service';\r\nimport {\r\n  booksLoaded,\r\n  booksRequested,\r\n  booksError,\r\n  bookAddedToCart,\r\n  bookInfoId,\r\n} from '../../actions/index';\r\nimport './book-list.css'\r\nimport Spinner from '../spinner';\r\nimport ErrorIndicator from '../error-indicator';\r\n\r\nconst BookList = ({books, onAddedToCart, onShowInfo, infoId}) => { // only render\r\n  return (\r\n    <div className=\"book-list-wrapper\">\r\n      {\r\n        books.map((book) => <BookListItem\r\n                              key={book.id}\r\n                              book={book}\r\n                              onAddedToCart={() => onAddedToCart(book.id)}\r\n                              infoId={infoId}\r\n                              onShowInfo={() => onShowInfo(book.id)} />)\r\n      }\r\n    </div>\r\n  );\r\n}\r\n\r\nexport class BookListContainer extends Component { // only logic\r\n  componentDidMount() {\r\n    this.props.fetchBooks();\r\n  }\r\n\r\n  render() {\r\n    const { books, isLoading, error, onAddedToCart, onShowInfo, infoId } = this.props;\r\n    if (isLoading) {\r\n      return (\r\n        <div className=\"book-list-wrapper\">\r\n          <Spinner />\r\n        </div>\r\n      )\r\n    }\r\n    if (error) {\r\n      return (\r\n        <div className=\"book-list-wrapper\">\r\n          <ErrorIndicator />\r\n        </div>\r\n      )\r\n    }\r\n\r\n    return <BookList books={books} onAddedToCart={onAddedToCart} onShowInfo={onShowInfo} infoId={infoId}/>\r\n  }\r\n}\r\n\r\n\r\n\r\nconst mapStateToProps = (state) => { // set props of component\r\n  return {\r\n    books: state.books,\r\n    isLoading: state.isLoading,\r\n    error: state.error,\r\n    infoId: state.infoId\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch, ownProps) => {\r\n  const { bookstoreService } = ownProps // ownProps gets props from rendering element\r\n  return { //todo read more about bindActionCreators\r\n      fetchBooks: () => {\r\n        dispatch(booksRequested()); // will show spinner every time when visit home page\r\n        bookstoreService.getBooks()\r\n        .then((data) => { \r\n          dispatch(booksLoaded(data)) // dispatch action to store\r\n        })\r\n        .catch((err) => {\r\n          dispatch(booksError(err));\r\n        })\r\n      },\r\n      onAddedToCart: (id) => {\r\n        dispatch(bookAddedToCart(id))\r\n      },\r\n      onShowInfo: (id) => {\r\n        dispatch(bookInfoId(id))\r\n      }\r\n    }\r\n  }\r\n\r\nexport default withBookstoreService()\r\n                (connect(mapStateToProps, mapDispatchToProps)\r\n                  (BookListContainer)); // send components with ready props\r\n","import BookListContainer from './book-list';\r\n\r\nexport default BookListContainer;","import React from 'react';\r\nimport BookListContainer from '../book-list';\r\nimport './home-page.css';\r\n\r\nconst HomePage = () => {\r\n  return (\r\n    <div className=\"home-page-wrapper\">\r\n      <BookListContainer />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default HomePage","import ShoppingCartTable from \"./shopping-cart-table\";\r\nexport default ShoppingCartTable;","import React from 'react';\r\nimport './shopping-cart-table.css'\r\nimport { connect } from 'react-redux';\r\nimport {bookAddedToCart,\r\n  allBookRemovedFromCart,\r\n  bookRemovedFromCart} from '../../actions/index';\r\nimport {\r\n  Link\r\n} from \"react-router-dom\";\r\n\r\nconst ShoppingCartTable = ({items, total, onIncrease, onDecrease, onDelete}) => {\r\n  return (\r\n    <div className=\"shopping-cart\">\r\n      <div className=\"shopping-cart-header\">\r\n        <h3>Your cart:</h3>\r\n        <Link className=\"btn btn-warning cart-btn return-btn\" to=\"/\">Return to shop</Link>\r\n      </div> \r\n      <table className=\"table shopping-cart-table\">\r\n        <thead className=\"shopping-cart-table-header\">\r\n          <tr>\r\n            <th scope=\"col\">#</th>\r\n            <th scope=\"col\">Item</th>\r\n            <th scope=\"col\">Count</th>\r\n            <th scope=\"col\">Price</th>\r\n            <th scope=\"col\">Action</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {\r\n            items.map((item, idx) => {\r\n              const {id, title, total, count} = item\r\n              return (\r\n              <tr key={id} className=\"shopping-cart-table tr\">\r\n                <th>{idx + 1}</th>\r\n                <td>{title}</td>\r\n                <td>{count}</td>\r\n                <td>{`$${total}`}</td>\r\n                <td className=\"td-btns\">\r\n                  <button\r\n                    className=\"btn btn-success cart-btn\"\r\n                    onClick={() => onIncrease(id)}\r\n                    >\r\n                    <i className=\"fa fa-plus-square\"></i>\r\n                  </button>\r\n                  <button\r\n                    className=\"btn btn-warning cart-btn\"\r\n                    onClick={() => onDecrease(id)}\r\n                    >\r\n                    <i className=\"fa fa-minus-square\"></i>\r\n                  </button>\r\n                  <button\r\n                    className=\"btn btn-danger cart-btn\"\r\n                    onClick={() => onDelete(id)}\r\n                    >\r\n                    <i className=\"fa fa-trash\"></i>\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n              )\r\n            })\r\n          }\r\n        </tbody>\r\n      </table>\r\n      <h5 className=\"shopping-cart-total\">Total: ${total}</h5>\r\n    </div>\r\n    \r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state) => { // set props of component\r\n  return {\r\n    items: state.cartItems,\r\n    total: state.orderTotal,\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return { //todo read more about bindActionCreators\r\n    onIncrease: (id) => dispatch(bookAddedToCart(id)),\r\n    onDecrease: (id) => dispatch(bookRemovedFromCart(id)),\r\n    onDelete: (id) => dispatch(allBookRemovedFromCart(id)),\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ShoppingCartTable);\r\n","import React from 'react';\r\nimport ShoppingCartTable from '../shopping-cart-table';\r\n\r\nconst CartPage = () => {\r\n  return (\r\n    <div className=\"home-page-wrapper\">\r\n      <ShoppingCartTable />\r\n    </div>\r\n    \r\n  )\r\n}\r\n\r\nexport default CartPage","export default class BookstoreService {\r\n  _bookApi = 'https://api.itbook.store/1.0/'\r\n  _proxyUrl = 'https://cors-anywhere.herokuapp.com/';\r\n  async getResource(url) {\r\n    const res = await fetch(`${this._proxyUrl}${url}`);\r\n    if (!res.ok) {\r\n      throw new Error('something wromg...')\r\n    }\r\n    const data = await res.json();\r\n    return data;\r\n  }\r\n  _trandformBook = (book) => {\r\n    return {\r\n      id: book.isbn13,\r\n      title: book.title,\r\n      author: book.subtitle,\r\n      image: book.image,\r\n      price: parseFloat((book.price).slice(1)),\r\n    }\r\n  }\r\n  getBooks = async () => {\r\n    const res = await this.getResource(`${this._bookApi}new`);\r\n    return (res.books).map(this._trandformBook);\r\n  }\r\n  getBookInfo = async (id) => {\r\n    const res = await this.getResource(`${this._bookApi}books/${id}`);\r\n    return res;\r\n  }\r\n}","import React from 'react';\r\n\r\nconst ratingStars = (rating) => {\r\n  let stars = new Array(5).fill(false);\r\n  parseInt(rating)\r\n  let i = 0;\r\n  while (i <= rating - 1) {\r\n    stars[i] = true;\r\n    i++;\r\n  }\r\n  let filledStars = stars.filter((element => element === true));\r\n  let emptyStars = stars.filter((element => element === false));\r\n  filledStars = filledStars.map((value, index) => <i key={index + 1} className=\"fa fa-star colored\" />)\r\n  emptyStars = emptyStars.map((value, index) => <i key={index + 5} className=\"fa fa-star empty\" />)\r\n  return [...filledStars, ...emptyStars]\r\n}\r\n\r\nexport default ratingStars;","import React, { Component } from 'react';\r\nimport './book-info.css';\r\nimport { connect } from 'react-redux';\r\nimport BookstoreService from '../../services/bookstore-service';\r\nimport {\r\n  bookInfo,\r\n} from '../../actions/index';\r\nimport Spinner from '../spinner';\r\nimport ratingStars from '../../utils/ratingStars';\r\n\r\nexport class BookInfo extends Component {\r\n  state = {\r\n    bookInfo: {},\r\n    isLoading: true,\r\n  }\r\n  componentDidMount() {\r\n    this.getBook()\r\n  }\r\n  getBook() {\r\n    const { infoId, fetchBookInfo } = this.props;\r\n    if (!infoId) {\r\n      return (\r\n        <div className=\"home-page-wrapper\">\r\n          <h1 className=\"book-info\">Return to previous page and select book</h1>\r\n        </div>\r\n      )\r\n    }\r\n    const service = new BookstoreService();\r\n    const result = service.getBookInfo(infoId)\r\n      .then((bookInfo) => {\r\n        this.setState({\r\n          bookInfo,\r\n          isLoading: false,\r\n        });\r\n      })\r\n      \r\n    return fetchBookInfo(result);\r\n  }\r\n  render() {\r\n    const { infoId } = this.props;\r\n    const { bookInfo, isLoading } = this.state;\r\n    const {\r\n      title,\r\n      subtitle,\r\n      authors,\r\n      publisher,\r\n      language,\r\n      pages,\r\n      year,\r\n      rating,\r\n      desc,\r\n      price,\r\n      image\r\n    } = bookInfo\r\n    let a = ratingStars(rating)\r\n    if (!infoId) {\r\n      return (\r\n        <div className=\"home-page-wrapper\">\r\n          <h1 className=\"book-info\">Return to previous page and select book</h1>\r\n        </div>\r\n      )\r\n    }\r\n    if (isLoading) {\r\n      return (\r\n        <div className=\"home-page-wrapper\">\r\n          <div className=\"book-info\">\r\n            <Spinner />\r\n          </div>\r\n        </div>\r\n      )\r\n    }\r\n    return (\r\n      <div className=\"home-page-wrapper\">\r\n        <div className=\"book-info jumbotron book-info-block\">\r\n          <div className=\"book-image-info\" style={{backgroundImage: `url(${image})`}} alt=\"img\"/>\r\n          <div className=\"book-info-block_titles\">\r\n            <h1 className=\"book-info-title\">{title}</h1>\r\n            <h2 className=\"book-info-subtitle\">{subtitle}</h2>\r\n            <hr size=\"30\" />\r\n            <h5>Authors: {authors}</h5>\r\n            <h5>Publisher: {publisher}</h5>\r\n            <h5>Language: {language}</h5>\r\n            <h5>Pages: {pages}</h5>\r\n            <h5>Year: {year}</h5>\r\n            <h5>Description: {desc}</h5>\r\n            <div className=\"rating\">\r\n              <h3>Rating: {a}</h3>\r\n            </div>\r\n            <h2>Price: {price}</h2>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = ({infoId, bookInfo}) => {\r\n  return {\r\n    infoId,\r\n    bookInfo\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    fetchBookInfo: (info) => {\r\n      dispatch(bookInfo(info))\r\n    }\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(BookInfo);\r\n","import ShopHeader from './shop-header';\r\n\r\nexport default ShopHeader","import React from 'react';\r\nimport './shop-header.css'\r\nimport {\r\n  Link\r\n} from \"react-router-dom\";\r\nimport { connect } from 'react-redux';\r\nimport './shop-header.css'\r\n\r\nconst countItems = (cartItems) => {\r\n  if (!cartItems.length) {\r\n    return 0;\r\n  }\r\n  return cartItems.reduce((reducer, {count}) => reducer + count, 0);\r\n}\r\n\r\nconst ShopHeader= ({items, total}) => {\r\n  return (\r\n      <nav className=\"navbar navbar-expand-lg navbar-dark bg-success\">\r\n        <Link className=\"navbar-brand\" to=\"/\">RE-store</Link>\r\n        <Link to=\"/cart\" className=\"btn cart-link\">\r\n          <i className=\"fa fa-shopping-cart\"></i>\r\n          <span className=\"cart-num\">{`${countItems(items)} items `}</span>\r\n          <span className=\"cart-total\">{` ${total}$`}</span>\r\n        </Link>\r\n      </nav>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    items: state.cartItems,\r\n    total: state.orderTotal,\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(ShopHeader);\r\n","import App from './app';\r\nexport default App;","import React from 'react';\r\nimport {\r\n  CartPage,\r\n  HomePage,\r\n  BookInfo\r\n} from '../pages';\r\nimport { Switch, Route} from 'react-router-dom';\r\nimport ShopHeader from '../shop-header';\r\n\r\nconst App = () => {\r\n  return (\r\n    <main>\r\n      <ShopHeader />\r\n      <Switch>\r\n        <Route path=\"/\" component={HomePage} exact/>\r\n        <Route path=\"/cart\" component={CartPage} />\r\n        <Route path=\"/book-info\" component={BookInfo} />\r\n      </Switch>\r\n    </main>\r\n   \r\n  );\r\n}\r\n\r\nexport default App;\r\n","import ErrorBoundry from './error-boundry';\r\nexport default ErrorBoundry;","import React, { Component } from 'react';\r\nimport ErrorIndicator from '../error-indicator';\r\n\r\nexport class ErrorBoundry extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      hasError: false,\r\n    };\r\n  }\r\n\r\n  componentDidCatch() {\r\n    this.state({\r\n      hasError: true\r\n    })\r\n  }\r\n\r\n  render() {\r\n    if (this.state.hasError) {\r\n      return <ErrorIndicator />\r\n    }\r\n    return this.props.children;\r\n  }\r\n}\r\n\r\nexport default ErrorBoundry;\r\n","// ! use for adding not existing items\r\nconst updateCartItems = (cartItems, item, idx) => {\r\n  if (item.count === 0) {\r\n    return [\r\n      ...cartItems.slice(0, idx),\r\n      ...cartItems.slice(idx + 1)\r\n    ]\r\n  }\r\n  if (idx === -1) {\r\n    return [\r\n      ...cartItems,\r\n      item\r\n    ]\r\n  } else {\r\n    return [\r\n      ...cartItems.slice(0, idx),\r\n      item,\r\n      ...cartItems.slice(idx + 1)\r\n    ]\r\n  }\r\n}\r\n// ! use for adding count and price to state\r\nconst updateCartItem = (book, item, quantity) => {\r\n  let newItem;\r\n  if (item) {\r\n    newItem = {\r\n      ...item,\r\n      count: item.count + quantity,\r\n      total: parseFloat((item.total + quantity * book.price).toFixed(2))\r\n    }\r\n  } else {\r\n    newItem = {\r\n      id: book.id,\r\n      title: book.title,\r\n      count: 1,\r\n      total: book.price\r\n    }\r\n  }\r\n  return newItem;\r\n}\r\nconst countTotal = (cartItems) => {\r\n  if (!cartItems.length) {\r\n    return 0\r\n  }\r\n  return cartItems.reduce((reducer, {total}) => reducer + total, 0).toFixed(2);\r\n}\r\n\r\nconst updateOrder = (state, bookId, quantity) => {\r\n  const {books, cartItems} = state;\r\n  const book = books.find((book) => book.id === bookId);\r\n  const itemIndex = cartItems.findIndex((addedBook) => addedBook.id === bookId)\r\n  const item = cartItems[itemIndex]\r\n  let newItem = updateCartItem(book, item, quantity)\r\n  const updatedCart = updateCartItems(cartItems, newItem, itemIndex);\r\n  return {\r\n    ...state,\r\n    cartItems: updatedCart,\r\n    orderTotal: countTotal(updatedCart)\r\n  }\r\n}\r\n\r\nexport {updateOrder, countTotal};","import {updateOrder, countTotal} from './updateCart';\r\n\r\nconst initialState = {\r\n  books: [],\r\n  isLoading: true,\r\n  error: null,\r\n  cartItems: [],\r\n  orderTotal: 0,\r\n  infoId: null,\r\n  bookInfo: {}\r\n}\r\n\r\nconst reducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case 'FETCH_BOOKS_REQUEST':\r\n      return {\r\n        ...state,\r\n        books: action.payload,\r\n        isLoading: true,\r\n        error: null\r\n      }\r\n    case 'FETCH_BOOKS_SUCCESS':\r\n      return {\r\n        ...state,\r\n        books: action.payload,\r\n        isLoading: false,\r\n        error: null\r\n      }\r\n    case 'FETCH_BOOKS_FAILURE':\r\n      return {\r\n        ...state,\r\n        books: [],\r\n        isLoading: false,\r\n        error: action.payload\r\n      }\r\n    case 'BOOK_ADDED_TO_CART':\r\n      return updateOrder(state, action.payload, 1)\r\n    case 'BOOK_REMOVED_FROM_CART':\r\n      return updateOrder(state, action.payload, -1)\r\n    case 'ALL_BOOKS_REMOVED_FROM_CART':\r\n      const deletedBookId = action.payload;\r\n      const updatedBooks = state.cartItems.filter((item) => item.id !== deletedBookId)\r\n      return {\r\n        ...state,\r\n        cartItems: updatedBooks,\r\n        orderTotal: countTotal(updatedBooks)\r\n      }\r\n    case 'WRITE_BOOK_ID':\r\n      return {\r\n        ...state,\r\n        infoId: action.payload\r\n      }\r\n    case 'FETCH_BOOK_INFO':\r\n      return {\r\n        ...state,\r\n        bookInfo: action.payload\r\n      }\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport default reducer;","import {createStore} from 'redux';\r\nimport reducer from './reducers';\r\n\r\nconst store = createStore(\r\n  reducer,\r\n  window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__() // for debug\r\n  )\r\n\r\nexport default store;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './components/app';\r\nimport {Provider} from 'react-redux';\r\nimport {BrowserRouter as Router} from 'react-router-dom';\r\nimport ErrorBoundry from './components/error-boundry';\r\nimport BookstoreService from './services/bookstore-service';\r\nimport { BookstoreServiceProvider } from './components/bookstore-service-context';\r\nimport store from './store';\r\n\r\nconst bookstoreService = new BookstoreService();\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <ErrorBoundry>\r\n      <BookstoreServiceProvider value={bookstoreService}>\r\n        <Router>\r\n          <App />\r\n        </Router>\r\n      </BookstoreServiceProvider>\r\n    </ErrorBoundry>\r\n  </Provider>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}